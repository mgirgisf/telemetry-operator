---
- job:
    name: telemetry-operator-multinode-autoscaling
    parent: podified-multinode-edpm-deployment-crc
    dependencies: ["openstack-k8s-operators-content-provider"]
    description: |
      Deploy OpenStack with Autoscaling features enabled
    vars:
      cifmw_extras:
        - "@{{ ansible_user_dir }}/{{ zuul.projects['github.com/openstack-k8s-operators/ci-framework'].src_dir  }}/scenarios/centos-9/multinode-ci.yml"
        - "@{{ ansible_user_dir }}/{{ zuul.projects['github.com/openstack-k8s-operators/telemetry-operator'].src_dir }}/ci/vars-autoscaling.yml"

- job:
    name: telemetry-operator-multinode-autoscaling-tempest
    parent: telemetry-operator-multinode-autoscaling
    required-projects:
      - openstack/heat-tempest-plugin
      - openstack/heat
    vars:
      cifmw_extras:
        - "@{{ ansible_user_dir }}/{{ zuul.projects['github.com/openstack-k8s-operators/ci-framework'].src_dir  }}/scenarios/centos-9/multinode-ci.yml"
        - "@{{ ansible_user_dir }}/{{ zuul.projects['github.com/openstack-k8s-operators/telemetry-operator'].src_dir }}/ci/vars-autoscaling.yml"
        - "@{{ ansible_user_dir }}/{{ zuul.projects['github.com/openstack-k8s-operators/telemetry-operator'].src_dir }}/ci/vars-autoscaling-tempest.yml"
      cifmw_test_operator_tempest_external_plugin:
        # workaround(telemetry_tempest_plugin_release)
        - repository: "https://opendev.org/openstack/telemetry-tempest-plugin.git"
          changeRepository: "https://review.opendev.org/openstack/telemetry-tempest-plugin"
          changeRefspec: "refs/changes/23/912723/1"
- project-template:
    name: rdo-telemetry-tempest-plugin-jobs
    openstack-experimental:
      jobs:
        - noop

- project:
    name: openstack-k8s-operators/telemetry-operator
    templates:
      - podified-multinode-edpm-pipeline
    github-check:
      jobs:
        - telemetry-operator-multinode-autoscaling-tempest
